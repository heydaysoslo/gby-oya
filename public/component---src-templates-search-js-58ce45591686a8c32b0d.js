(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{209:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(238),c=(a(101),a(138),a(73),a(14),a(53),a(42),a(31),a(24),a(103),a(215),a(213)),l=a(211),o=a(214);var u=function(e){var t,a;function r(){return e.apply(this,arguments)||this}return a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r.prototype.render=function(){return n.a.createElement("div",{className:"BlogPage__action"},n.a.createElement("button",{disabled:this.props.loading,className:"button",onClick:this.props.loadMore},this.props.loading?n.a.createElement(o.b,{id:"button.loading",defaultMessage:"Loading"}):n.a.createElement(o.b,{id:"button.loadMore",defaultMessage:"Load more"})))},r}(r.Component);var i=function(e){var t,a;function r(){return e.apply(this,arguments)||this}return a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r.prototype.render=function(){var e=this.props,t=e.input,a=e.query,r=e.actions,s=e.results,i=e.resultTotal,m=e.loading,p=e.submitted,d=e.currentPage,h=e.totalPages;return n.a.createElement("div",{className:"Search"},n.a.createElement("header",{className:"Search__header"},n.a.createElement("form",{className:"Search__form",onSubmit:r.submitHandler},n.a.createElement("div",{className:"Search__input-wrapper"},a&&n.a.createElement("button",{className:"Search__clear",type:"button",onClick:r.clearSearch},"×"),n.a.createElement(o.b,{id:"search.placeholder",defaultMessage:"Søk her"},function(e){return n.a.createElement("input",{name:"search",className:"Search__input",ref:t,type:"text",value:a,onChange:r.handleChange,placeholder:e})})),n.a.createElement("button",{className:"Search__submit button",type:"submit",value:""},n.a.createElement(o.b,{id:"search.submit",defaultMessage:"Search"}))),m&&n.a.createElement("div",null,n.a.createElement(o.b,{id:"search.searching",defaultMessage:'Searching for "{queryString}"',values:{queryString:p}}),n.a.createElement(l.h,null)),s.length>0&&n.a.createElement("p",null,n.a.createElement(o.b,{id:"search.results",defaultMessage:'Found {resultTotal} results for "{queryString}"',values:{resultTotal:i,queryString:p}}))),s.length>0&&n.a.createElement("div",{className:"SearchResults"},s.map(function(e){return n.a.createElement("div",{className:"SearchResults__item",key:e.id},n.a.createElement(c.a,{className:"SearchResults__link",to:e.link},n.a.createElement("div",{className:"SearchResults__content"},n.a.createElement("h3",{className:"SearchResults__title"},n.a.createElement(l.f,{content:e.title.rendered})),e.excerpt&&n.a.createElement("div",{className:"SearchResults__excerpt"},n.a.createElement(l.f,{content:e.excerpt.rendered}))),e.featured_image&&n.a.createElement("div",{className:"SearchResults__media"},n.a.createElement(l.k,{hoverable:!0},n.a.createElement(l.e,Object.assign({className:"SearchResults__image aspect-sm--square"},e.featured_image,{maxWidth:300}))))))}),d&&h&&d<h&&n.a.createElement(u,{loadMore:r.loadMore,loading:m})),a&&s&&0===s.length&&!m&&p&&n.a.createElement("div",{className:"Search__no-hits"},n.a.createElement("h2",{className:"Search__title"},n.a.createElement(o.b,{id:"search.noresults",defaultMessage:'Sorry, no results for "{queryString}"',values:{queryString:p}})),n.a.createElement("button",{className:"button",onClick:r.clearSearch},n.a.createElement(o.b,{id:"search.noresultsMessage",defaultMessage:"Prøv en annen søketerm"}))))},r}(r.Component);function m(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p=function(e){return e},d=function(e){var t,a;function s(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).input=Object(r.createRef)(),t.state={query:"",results:[],loading:!1,submitted:!1,page:null},t.componentDidMount=function(){t.inputFocusTimer=setTimeout(function(){t.input.current.focus()},300)},t.clearSearch=function(){t.setState({query:""},function(){t.search(),t.input.current.focus()})},t.componentWillUnmount=function(){t.inputFocusTimer&&clearTimeout(t.inputFocusTimer)},t.handleChange=function(e){t.setState({query:e.target.value})},t.submitHandler=function(e){e.preventDefault(),t.handleSearch()},t.handleSearch=function(){t.search()},t.loadMore=function(){t.search(t.state.meta.current_page+1)},t.search=function(e){void 0===e&&(e=1);var a=p(t.state.query);if(a){var r={loading:!0};t.state.query!==t.state.submitted&&(r.submitted=t.state.query,r.results=[]),t.setState(r),fetch("https://api.oyafestivalen.no/wp-json/hey/v1/search?s="+a+"&page="+e).then(function(e){return e.json()}).then(function(a){t.setState(function(t){return{results:1===e?a.results:[].concat(m(t.results),m(a.results)),meta:a.meta,loading:!1}},function(){})}).catch(function(e){t.setState({loading:!1,results:[]})})}else t.setState({loading:!1,query:"",results:[],submitted:!1})},t}return a=e,(t=s).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,s.prototype.render=function(){var e=this.state,t=e.query,a=e.results,r=e.meta,s=e.loading,c=e.submitted,l={query:t,results:a,resultTotal:r&&r.result_total||0,currentPage:r&&r.current_page||0,totalPages:r&&r.total_pages||0,loading:s,input:this.input,submitted:c},o={clearSearch:this.clearSearch,handleChange:this.handleChange,loadMore:this.loadMore,submitHandler:this.submitHandler};return n.a.createElement("article",{className:"Page"},n.a.createElement(i,Object.assign({actions:o},l)))},s}(r.Component);a.d(t,"pageQuery",function(){return h});t.default=function(e){var t=e.data,a=e.pageContext,r=a.locale,c=a.translations;return n.a.createElement(s.a,{locale:r,translations:c,options:t.wordpressHeyAcfoptions,settings:t.wordpressHeySettings},n.a.createElement("article",{className:"Page"},n.a.createElement(d,{locale:r})))};var h="3357471324"}}]);
//# sourceMappingURL=component---src-templates-search-js-58ce45591686a8c32b0d.js.map